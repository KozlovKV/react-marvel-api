"use strict";(self.webpackChunkmarvel_universe=self.webpackChunkmarvel_universe||[]).push([[972],{9613:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t.p+"static/media/error.42292aa12b6bc303ce99.gif",a=t(184);function s(){return(0,a.jsx)("img",{src:r,alt:"Error gif"})}},8335:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(885),a=t(2791),s=t(4270),c=t(4304),i=t(725),o=t.p+"static/media/mjolnir.61f31e1809f12183a524.png",l=t(184),u=(0,i.Z)();function h(){var e=(0,a.useState)({}),n=(0,r.Z)(e,2),t=n[0],s=n[1],i=(0,c.ZP)(),h=i.processState,m=i.setProcessState,f=i.getCharacter,p=function(e){s(e)},x=function(){var e=Math.floor(400*Math.random()+1011e3);f(e).then(p).then((function(){return m("success")}))};return(0,a.useEffect)(x,[]),(0,l.jsxs)("div",{className:"randomchar",children:[(0,l.jsx)(u,{state:h,children:(0,l.jsx)(d,{char:t})}),(0,l.jsxs)("div",{className:"randomchar__static",children:[(0,l.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,l.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,l.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,l.jsx)("button",{className:"button button__main",onClick:x,children:(0,l.jsx)("div",{className:"inner",children:"try it"})}),(0,l.jsx)("img",{src:o,alt:"mjolnir",className:"randomchar__decoration"})]})]})}function d(e){var n=e.char,t=n.thumbnail,r=n.name,a=n.homepageUrl,s=n.wikiUrl,c=n.shortedDescription;return(0,l.jsxs)("div",{className:"randomchar__block",children:[(0,l.jsx)("img",{src:t.url,alt:r,className:"randomchar__img",style:t.style}),(0,l.jsxs)("div",{className:"randomchar__info",children:[(0,l.jsx)("p",{className:"randomchar__name",children:r}),(0,l.jsx)("p",{className:"randomchar__descr",children:c}),(0,l.jsxs)("div",{className:"randomchar__btns",children:[(0,l.jsx)("a",{href:a,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:s,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})}var m=t(2982),f=(0,i.Z)();function p(e){var n=(0,a.useState)([]),t=(0,r.Z)(n,2),s=t[0],i=t[1],o=(0,c.ZP)(),u=o.processState,h=o.setProcessState,d=o.getCharacters,p=function(e){i((function(n){return[].concat((0,m.Z)(n),(0,m.Z)(e))}))},x=function(){var e=s.length;d(e,9).then(p).then((function(){return h("success")}))},v=function(){return s.length<c.Ke-c.TL},j=function(){v()&&x()};return(0,a.useEffect)(x,[]),(0,l.jsx)("div",{className:"char__list",children:(0,l.jsxs)(f,{state:u,children:[(0,l.jsx)("ul",{className:"char__grid",children:s.map((function(n,t){var r=n.thumbnail,a=n.name,s=n.id,c=e.selectedCharId,i=e.onCharSelected,o="char__item ".concat(c===s?"char__item_selected":"");return(0,l.jsxs)("li",{className:o,tabIndex:"0",role:"treeitem",onFocus:function(){return i(s)},"data-id":s,children:[(0,l.jsx)("img",{src:r.url,alt:a,style:r.style}),(0,l.jsx)("div",{className:"char__name",children:a})]},t)}))}),function(){var e=v();return(0,l.jsx)("button",{className:"button button__main button__long",onClick:j,disabled:!e||"loading"===u,tabIndex:"0",children:(0,l.jsx)("div",{className:"inner",children:e?"load more":"All characters loaded"})})}()]})})}function x(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,l.jsxs)("div",{className:"skeleton",children:[(0,l.jsxs)("div",{className:"pulse skeleton__header",children:[(0,l.jsx)("div",{className:"pulse skeleton__circle"}),(0,l.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"})]})]})}var v=(0,i.Z)({waiting:function(){return(0,l.jsx)(x,{})}});function j(e){var n=(0,a.useState)(null),t=(0,r.Z)(n,2),s=t[0],i=t[1],o=(0,c.ZP)(),u=o.processState,h=o.setProcessState,d=o.getCharacter,m=function(e){i(e)};return(0,a.useEffect)((function(){var n=e.selectedCharId;n&&d(n).then(m).then((function(){return h("success")}))}),[e.selectedCharId]),(0,l.jsx)("div",{className:"char__info",children:(0,l.jsx)(v,{state:u,children:(0,l.jsx)(_,{char:s})})})}var _=function(e){var n=e.char,t=n.thumbnail,r=n.name,a=n.homepageUrl,s=n.wikiUrl,c=n.description,i=n.comics.map((function(e){return(0,l.jsx)("li",{className:"char__comics-item",children:e.name},e.name)}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"char__basics",children:[(0,l.jsx)("img",{src:t.url,alt:r,style:t.style}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"char__info-name",children:r}),(0,l.jsxs)("div",{className:"char__btns",children:[(0,l.jsx)("a",{href:a,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:s,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),(0,l.jsx)("div",{className:"char__descr",children:c}),(0,l.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,l.jsx)("ul",{className:"char__comics-list",children:i.length>0?i.slice(0,10):"No comics with this character"})]})},g=t(3504),b=t(5705),N=t(132),y=(0,i.Z)();function Z(e){var n=(0,c.ZP)(),t=n.processState,s=n.setProcessState,i=n.getCharactersByNamePart,o=(0,a.useState)(null),u=(0,r.Z)(o,2),h=u[0],d=u[1];return(0,l.jsxs)("div",{className:"char__find",children:[(0,l.jsx)("h3",{children:"Or find a characters by name:"}),(0,l.jsx)(b.J9,{initialValues:{name:""},validationSchema:N.Ry({name:N.Z_().required("Name is required").min(2,"2 symbols minimum")}),onSubmit:function(e){var n=e.name;i(n).then(d).then((function(){return s("success")}))},children:(0,l.jsxs)(b.l0,{className:"char__find__form row",children:[(0,l.jsx)(b.gN,{name:"name",placeholder:"Enter name"}),(0,l.jsx)("button",{type:"submit",className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"find"})}),(0,l.jsx)(b.Bc,{name:"name",className:"error",component:"h3"})]})}),(0,l.jsx)(y,{state:t,children:h?h.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h3",{className:"success",children:["Founded ",h.length," char",h.length>1?"s":""]}),(0,l.jsx)("ul",{className:"char__find__results-list",children:h.map((function(e){return(0,l.jsxs)("li",{className:"row char__find__results-item",children:[(0,l.jsx)("h4",{children:e.name}),(0,l.jsx)(g.rU,{to:"/chars/".concat(e.id),className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"char page"})})]},e.id)}))})]}):(0,l.jsx)("h3",{className:"error",children:"Characters not found"}):null})]})}var k=t(5671),w=t(3144),C=t(136),S=t(3668),P=t(9613),F=function(e){(0,C.Z)(t,e);var n=(0,S.Z)(t);function t(){var e;(0,k.Z)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).state={error:!1},e}return(0,w.Z)(t,[{key:"componentDidCatch",value:function(e,n){console.log(e,n),this.setState({error:!0})}},{key:"render",value:function(){var e=this.state.error,n=this.props.children;return(0,l.jsx)(l.Fragment,{children:e?(0,l.jsx)(P.Z,{}):n})}}]),t}(a.Component),E=t.p+"static/media/vision.067d4ae1936d64a577ce.png";function I(){var e=(0,a.useState)(0),n=(0,r.Z)(e,2),t=n[0],c=n[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.Z,{children:[(0,l.jsx)("meta",{name:"description",content:"Marvel information portal powered by Marvel API"}),(0,l.jsx)("title",{children:"Marvel Universe"})]}),(0,l.jsx)(F,{children:(0,l.jsx)(h,{})}),(0,l.jsxs)("div",{className:"char__content",children:[(0,l.jsx)(F,{children:(0,l.jsx)(p,{selectedCharId:t,onCharSelected:function(e){return c(e)}})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F,{children:(0,l.jsx)(j,{selectedCharId:t})}),(0,l.jsx)(F,{children:(0,l.jsx)(Z,{})})]})]}),(0,l.jsx)("img",{className:"bg-decoration",src:E,alt:"vision"})]})}},725:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(4925),a=t(8683),s=t(3394),c=t(9613),i=t(184),o=["state"];function l(e){var n=(0,a.Z)({waiting:function(){},loading:function(){return(0,i.jsx)(s.Z,{})},error:function(){return(0,i.jsx)(c.Z,{})},fetched:function(){},success:function(e){var n=e.children;return(0,i.jsx)(i.Fragment,{children:n})}},e);return function(e){var t=e.state,a=(0,r.Z)(e,o);return n[t](a)}}},4304:function(e,n,t){t.d(n,{TL:function(){return u},Ke:function(){return h},zZ:function(){return m},lX:function(){return f},ZP:function(){return o}});var r=t(5861),a=t(7757),s=t.n(a),c=t(885),i=t(2791);function o(){var e="https://gateway.marvel.com:443/v1/public",n="apikey=d840bc106aeea955689856e89bb25220",t=function(){var e=(0,i.useState)(!1),n=(0,c.Z)(e,2),t=n[0],a=n[1],o=(0,i.useState)(!1),l=(0,c.Z)(o,2),u=l[0],h=l[1],d=(0,i.useState)("waiting"),m=(0,c.Z)(d,2),f=m[0],p=m[1],x=(0,i.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(n){var t,r,c,i,o,l=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},a(!0),h(!1),p("loading"),e.next=8,fetch(n,{method:t,body:r,headers:c});case 8:if((i=e.sent).ok){e.next=14;break}throw a(!1),h(!0),p("error"),new Error("Can't fetch url ".concat(n,", error ").concat(i.status,": ").concat(i.statusText));case 14:return e.next=16,i.json();case 16:return o=e.sent,a(!1),h(!1),p("fetched"),e.abrupt("return",o);case 21:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return{loading:t,error:u,processState:f,setProcessState:p,request:x}}(),a=t.loading,o=t.error,x=t.processState,j=t.setProcessState,_=t.request;function g(e,n){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)(s().mark((function t(r,a){var c,i,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in c=[n],a)c.push("".concat(i,"=").concat(a[i]));return o="".concat(e,"/").concat(r,"?").concat(c.join("&")),t.abrupt("return",_(o));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(){return N=(0,r.Z)(s().mark((function e(n){var t,r,a,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=c.length>1&&void 0!==c[1]?c[1]:9)<=l?t:l,r=(r=u+n)<=h?r:h,e.next=6,g("characters",{limit:t,offset:r});case 6:return a=e.sent,e.abrupt("return",a.data.results.map(k));case 8:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function y(){return(y=(0,r.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("characters",{nameStartsWith:n,limit:100});case 2:return t=e.sent,e.abrupt("return",t.data.results.map(k));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=(0,r.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("characters/".concat(n));case 2:return t=e.sent,e.abrupt("return",k(t.data.results[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var n=e.id,t=e.name,r=e.urls,a=e.comics,s=v(e.thumbnail),c=r[0].url,i=r[1].url,o=e.description?e.description:"Description not found";return{id:n,name:t,description:o,thumbnail:s,homepageUrl:c,wikiUrl:i,shortedDescription:p(o),comics:a.items}}function w(){return w=(0,r.Z)(s().mark((function e(n){var t,r,a,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=c.length>1&&void 0!==c[1]?c[1]:8)<=d?t:d,r=(r=m+n)<=f?r:f,e.next=6,g("comics",{limit:t,offset:r});case 6:return a=e.sent,e.abrupt("return",a.data.results.map(S));case 8:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function C(){return(C=(0,r.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("comics/".concat(n));case 2:return t=e.sent,e.abrupt("return",S(t.data.results[0]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var n=e.id,t=e.title,r=e.pageCount,a=v(e.thumbnail),s=e.prices[0].price,c=e.description?e.description:"Description not found";return{id:n,title:t,pageCount:r,price:s,description:c,thumbnail:a,shortedDescription:p(c),language:e.textObjects.language||"en-us"}}return{loading:a,error:o,processState:x,setProcessState:j,getCharacter:function(e){return Z.apply(this,arguments)},getCharacters:function(e){return N.apply(this,arguments)},getCharactersByNamePart:function(e){return y.apply(this,arguments)},getComic:function(e){return C.apply(this,arguments)},getComics:function(e){return w.apply(this,arguments)}}}var l=100,u=210,h=1561,d=100,m=0,f=1561;function p(e){if(e.length<=190)return e;var n=e.split(" "),t=0,r=0;return n.forEach((function(e,n){t+e.length<=190&&n-r<=1&&(t+=e.length,r=n)})),n.slice(0,r).join(" ")+"\u2026"}var x=["4c002e0305708","image_not_available"];function v(e){var n={url:e.path+"."+e.extension,style:{}};return x.some((function(n){return e.path.indexOf(n)>-1}))&&(n.style.objectFit="contain"),n}}}]);
//# sourceMappingURL=972.f0a8aea9.chunk.js.map